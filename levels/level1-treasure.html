<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–£—Ä–æ–≤–µ–Ω—å 1 ‚Äî –ü–æ–∏—Å–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤</title>
  <link rel="stylesheet" href="../css/main.css">
  <style>
    /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É—Ä–æ–≤–Ω—è */
    body { font-family: sans-serif; background: linear-gradient(#eef6ff, #fff); color:#222; padding:20px; }
    .game-wrap { max-width:1000px; margin:0 auto; }
    .hud { display:flex; gap:16px; justify-content:space-between; align-items:center; margin-bottom:12px; }
    .scene-wrap { position:relative; width:720px; height:480px; border-radius:12px; overflow:hidden; background-size:cover; background-position:center; border:4px solid #9cc1d9; }
    .hotspot { position:absolute; width:80px; height:80px; border-radius:8px; cursor:pointer; transition: transform 0.18s, box-shadow 0.18s, opacity 0.18s; }
    .hotspot.hovered { transform: scale(1.06); box-shadow: 0 6px 18px rgba(0,0,0,0.25); opacity:1; }
    .hotspot.revealed::after { content: attr(data-icon); position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); font-size:28px; pointer-events:none; }
    .inventory { display:flex; gap:8px; margin-top:12px; align-items:center; }
    .slot { width:88px; height:88px; border:2px dashed #b8d7e6; border-radius:8px; display:flex; align-items:center; justify-content:center; background:#fff; cursor:pointer; transition: transform 0.25s; position:relative; }
    .slot.selected { outline:3px solid #ffd36b; transform:scale(1.03); }
    .slot.correct { box-shadow:0 0 0 3px rgba(100,255,100,0.18) inset; }
    .slot.wrong { animation: shake 0.45s; }
    @keyframes shake { 0%{transform:translateX(0)} 20%{transform:translateX(-6px)} 60%{transform:translateX(6px)} 100%{transform:translateX(0)} }
    .hint-panel { position: fixed; right: 20px; top: 100px; width:320px; background:#fff; border-radius:10px; padding:12px; box-shadow:0 8px 24px rgba(0,0,0,0.25); display:none; z-index:50; }
    .code-modal { position:fixed; left:0; top:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.45); }
    .code-card { background:#fff; padding:20px; border-radius:10px; width:420px; text-align:center; }

    .item-highlight {
      z-index: 60 !important;
      transform: scale(1.14) !important;
      box-shadow: 0 18px 44px rgba(255,240,120,0.6) !important;
      opacity: 1 !important;
      pointer-events: auto !important;
    }

  </style>

</head>
<body>
  <div style="max-width:1100px;margin:0 auto;padding:20px;">
    <header style="display:flex;align-items:center;gap:12px;">
      <a href="../index.html" id="back-btn">‚Üê –ù–∞–∑–∞–¥</a>
      <h1>üéÅ –ü–æ–∏—Å–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ ‚Äî –£—Ä–æ–≤–µ–Ω—å 1</h1>
    </header>

    <div style="display:flex;gap:18px;margin-top:12px;">
      <div>
        <div class="scene-wrap" id="scene" aria-label="–°—Ü–µ–Ω–∞ —É—Ä–æ–≤–Ω—è">
          <!-- overlay –¥–ª—è —Ä–µ–∂–∏–º–∞ "–º–∞–º–∏–Ω–æ –∑—Ä–µ–Ω–∏–µ" -->
          <div id="vision-overlay" class="vision-overlay" aria-hidden="true"></div>
        </div>
        <p style="margin-top:8px; font-size:0.9rem; opacity:0.85;">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–≤–µ–¥–µ–Ω–∏–µ, –∫–ª–∏–∫, –¥–æ–ª–≥–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ –¥–≤–æ–π–Ω—ã–µ –∫–ª–∏–∫–∏. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –≤—Å–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Ä–∞—Å—Å—Ç–∞–≤—å—Ç–µ –∏—Ö –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.</p>

        <!-- –ò–ù–í–ï–ù–¢–ê–†–¨: –ø–µ—Ä–µ–Ω—ë—Å –ø–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫—É -->
        <h3 style="margin-top:12px; text-align:center;">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
        <div class="inventory" id="inventory" style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:8px;"></div>
        <div style="display:flex;gap:8px;justify-content:center;margin-top:10px;">
          <button id="check-order" style="padding:8px 12px;background:#2f6b9b;color:#fff;border-radius:6px;border:none;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫</button>
        </div>
      </div>

      <div style="flex:1;">
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:10px;">
          <strong>–ò–≥—Ä–æ–∫:</strong> <span id="current-player" style="margin-left:8px;">‚Äî</span>
          <button id="open-modal" style="margin-left:auto;padding:8px 10px;">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</button>
          <button id="hint-toggle" title="–ü–æ–¥—Å–∫–∞–∑–∫–∏" style="margin-left:8px;padding:8px 10px;">?</button>
        </div>

        <!-- –¢–∞–π–º–µ—Ä –∏ —Å—á—ë—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ -->
        <div style="display:flex;gap:16px;align-items:center;margin-bottom:8px;">
          <div>–í—Ä–µ–º—è: <strong id="timer">00:00</strong></div>
          <div>–ö–ª–∏–∫–æ–≤: <strong id="click-count">0</strong></div>
        </div>

        <div class="hint-panel" id="hint-panel">
          <h4>–ü–æ–¥—Å–∫–∞–∑–∫–∏</h4>
          <div id="hint-text" style="min-height:56px;opacity:0.95"></div>
          <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end;">
            <button id="hint-next" style="padding:6px 10px;">–°–ª–µ–¥—É—é—â–∞—è</button>
          </div>
        </div>
        <div id="puzzle-info" style="margin-top:12px; font-size:0.95rem; opacity:0.9;"></div>
      </div>
    </div>
  </div>

  <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π –º–æ–¥–∞–ª: –¥–∏—Å–∫–ª–µ–π–º–µ—Ä + –≤—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ –∫–Ω–æ–ø–∫–∞–º–∏ -->
  <div id="start-modal" class="code-modal" style="display:none;">
    <div class="code-card">
      <h2>–ù–æ–≤–æ–≥–æ–¥–Ω—è—è –∫–∞—Ä—Ç–∞-—Å–æ–∫—Ä–æ–≤–∏—â–Ω–∏—Ü–∞</h2>
      <p>–ù–∞–π–¥–∏—Ç–µ 7 –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–∞–≤–µ–¥–µ–Ω–∏–µ, –∫–ª–∏–∫–∏, –¥–æ–ª–≥–∏–µ –Ω–∞–∂–∞—Ç–∏—è –∏ –¥–≤–æ–π–Ω—ã–µ –∫–ª–∏–∫–∏. –ü–æ—Ç–æ–º —Ä–∞—Å—Å—Ç–∞–≤—å—Ç–µ –∏—Ö –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥.</p>
      <div style="margin:12px 0;">
        <div id="player-list-buttons" style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;">
          <!-- –∫–Ω–æ–ø–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ localStorage —á–µ—Ä–µ–∑ Players.list -->
          <!-- –µ—Å–ª–∏ Players.list –ø—É—Å—Ç ‚Äî –±—É–¥–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
        </div>
      </div>

      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px;">
        <button id="start-play" style="padding:8px 12px;background:#2f6b9b;color:#fff;border-radius:6px;border:none;">–ò–≥—Ä–∞—Ç—å</button>
        <button id="close-start" style="padding:8px 12px;background:#ccc;border-radius:6px;border:none;">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª —Å –∫–æ–¥–æ–º -->
  <div id="final-modal" class="code-modal" style="display:none;">
    <div class="code-card">
      <h3>–ö–ª—é—á</h3>
      <p id="final-text" style="font-weight:bold;font-size:1.2rem;"></p>
      <p id="final-points" style="font-size:1rem; margin-top:8px; opacity:0.95;"></p>
      <p style="opacity:0.9;">–ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –∏ –≤–≤–µ–¥–∏—Ç–µ –µ–≥–æ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å.</p>
      <div style="display:flex;gap:8px;justify-content:center;margin-top:12px;">
        <button id="to-menu" style="padding:8px 12px;background:#8b1f2d;color:#fff;border-radius:6px;border:none;">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
      </div>
    </div>
  </div>

  <script src="../js/core/storage.js"></script>
  <script src="../js/core/players.js"></script>
  <script src="../js/levels/level1-treasure.js"></script>
</body>
</html>
